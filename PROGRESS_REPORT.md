# MAIFS í”„ë¡œì íŠ¸ ì§„í–‰ ë³´ê³ ì„œ
**Multi-Agent Image Forensic System**

ğŸ“… **ì‘ì„±ì¼**: 2026-01-24
ğŸ“Š **ë²„ì „**: v0.6.0 (Phase 5 - Qwen vLLM í†µí•©)

---

## ğŸ“‹ Executive Summary

MAIFSëŠ” ë‹¤ì¤‘ AI ì—ì´ì „íŠ¸ê°€ í˜‘ì—…í•˜ì—¬ AI ìƒì„± ì´ë¯¸ì§€ë¥¼ íƒì§€í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.
**Qwen 30B vLLM ì„œë²„ í†µí•©**ì´ ì™„ë£Œë˜ì–´ 4ê°œ ì „ë¬¸ê°€ ì—ì´ì „íŠ¸ê°€ LLM ê¸°ë°˜ ì¶”ë¡ ê³¼ í† ë¡ ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

| í•­ëª© | ìƒíƒœ |
|------|------|
| í•µì‹¬ êµ¬í˜„ | âœ… ì™„ë£Œ |
| í…ŒìŠ¤íŠ¸ | âœ… **161ê°œ í†µê³¼** |
| OmniGuard í†µí•© | âœ… ì™„ë£Œ |
| Manager LLM (Claude) | âœ… ì™„ë£Œ |
| **Sub-agent LLM (Qwen)** | âœ… **ì™„ë£Œ (NEW)** |
| **vLLM Batch Inference** | âœ… **ì™„ë£Œ (NEW)** |
| **Guided JSON Output** | âœ… **ì™„ë£Œ (NEW)** |
| **í† ë¡  ì‹œìŠ¤í…œ** | âœ… **ì™„ë£Œ (NEW)** |
| ë°ì´í„°ì…‹ í‰ê°€ | â³ ëŒ€ê¸° |

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              MAIFS v0.6.0                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                     vLLM Server (4 GPU Tensor Parallel)                  â”‚ â”‚
â”‚  â”‚                        Qwen2.5-32B-Instruct                              â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚  â”‚  â”‚              OpenAI-Compatible API + Guided JSON                â”‚    â”‚ â”‚
â”‚  â”‚  â”‚                  POST /v1/chat/completions                      â”‚    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚                                        â”‚
â”‚                                      â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                         QwenMAIFSAdapter                                 â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚   â”‚  Frequency   â”‚ â”‚    Noise     â”‚ â”‚  Watermark   â”‚ â”‚   Spatial    â”‚  â”‚ â”‚
â”‚  â”‚   â”‚   Agent      â”‚ â”‚    Agent     â”‚ â”‚    Agent     â”‚ â”‚    Agent     â”‚  â”‚ â”‚
â”‚  â”‚   â”‚              â”‚ â”‚              â”‚ â”‚              â”‚ â”‚              â”‚  â”‚ â”‚
â”‚  â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”‚
â”‚  â”‚   â”‚ â”‚FFT Tool  â”‚ â”‚ â”‚ â”‚PRNU Tool â”‚ â”‚ â”‚ â”‚OmniGuard â”‚ â”‚ â”‚ â”‚ViT Tool  â”‚ â”‚  â”‚ â”‚
â”‚  â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚
â”‚  â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”‚
â”‚  â”‚   â”‚ â”‚  Qwen    â”‚ â”‚ â”‚ â”‚  Qwen    â”‚ â”‚ â”‚ â”‚  Qwen    â”‚ â”‚ â”‚ â”‚  Qwen    â”‚ â”‚  â”‚ â”‚
â”‚  â”‚   â”‚ â”‚  LLM     â”‚ â”‚ â”‚ â”‚  LLM     â”‚ â”‚ â”‚ â”‚  LLM     â”‚ â”‚ â”‚ â”‚  LLM     â”‚ â”‚  â”‚ â”‚
â”‚  â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚
â”‚  â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”‚
â”‚  â”‚   â”‚ â”‚Knowledge â”‚ â”‚ â”‚ â”‚Knowledge â”‚ â”‚ â”‚ â”‚Knowledge â”‚ â”‚ â”‚ â”‚Knowledge â”‚ â”‚  â”‚ â”‚
â”‚  â”‚   â”‚ â”‚  Base    â”‚ â”‚ â”‚ â”‚  Base    â”‚ â”‚ â”‚ â”‚  Base    â”‚ â”‚ â”‚ â”‚  Base    â”‚ â”‚  â”‚ â”‚
â”‚  â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚                    batch_infer() - 4ê°œ ë™ì‹œ ì²˜ë¦¬                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚                                        â”‚
â”‚                                      â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                         Debate System                                    â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚   conduct_debate() â†’ ë¶ˆì¼ì¹˜ ê°ì§€ â†’ ë°˜ë¡ /ì‘ë‹µ â†’ í•©ì˜ ë„ë‹¬                  â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚   ì¢…ë£Œ ì¡°ê±´: CONSENSUS | STALEMATE | DEADLOCK | MAX_ROUNDS               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚                                        â”‚
â”‚                                      â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    COBRA Consensus + Manager (Claude)                    â”‚ â”‚
â”‚  â”‚                         ìµœì¢… íŒì • ìƒì„±                                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… ì™„ë£Œëœ ì‘ì—…

### Phase 1-4: ê¸°ë³¸ ì‹œìŠ¤í…œ (ì™„ë£Œ)
- [x] 4ê°œ ì „ë¬¸ê°€ ì—ì´ì „íŠ¸ + 4ê°œ ë¶„ì„ ë„êµ¬
- [x] COBRA í•©ì˜ ì•Œê³ ë¦¬ì¦˜ (RoT, DRWA, AVGA)
- [x] OmniGuard ì›Œí„°ë§ˆí¬ í†µí•©
- [x] Manager LLM (Claude API) í†µí•©
- [x] ë„ë©”ì¸ ì§€ì‹ íŒŒì¼ ì‘ì„± (4ê°œ)

### Phase 5: Qwen vLLM í†µí•© (NEW - ì™„ë£Œ) âœ…

#### 5-1. vLLM ì„œë²„ ì„¤ì •
- [x] `scripts/start_vllm_server.sh` - 4 GPU Tensor Parallel ì„¤ì •
- [x] Qwen2.5-32B-Instruct ëª¨ë¸ ì§€ì›
- [x] Guided Decoding Backend (Outlines) í™œì„±í™”

#### 5-2. QwenClient í´ë˜ìŠ¤
- [x] `src/llm/qwen_client.py` - vLLM OpenAI-compatible API í´ë¼ì´ì–¸íŠ¸
- [x] Async/Sync ì–‘ë°©í–¥ ì§€ì›
- [x] Batch Inference (4ê°œ ì—ì´ì „íŠ¸ ë™ì‹œ ì²˜ë¦¬)
- [x] Guided JSON Output (100% íŒŒì‹± ë³´ì¥)

#### 5-3. ì—ì´ì „íŠ¸ë³„ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸
- [x] Frequency Agent: FFT, GAN ì•„í‹°íŒ©íŠ¸, ì£¼íŒŒìˆ˜ ìŠ¤í™íŠ¸ëŸ¼
- [x] Noise Agent: PRNU, ì„¼ì„œ ë…¸ì´ì¦ˆ, ì¼ê´€ì„± ë¶„ì„
- [x] Watermark Agent: OmniGuard, BER, ë¬´ê²°ì„± ê²€ì¦
- [x] Spatial Agent: ViT, ì¡°ì‘ ì˜ì—­, manipulation_ratio
- [x] Manager Agent: 4ê°œ ì „ë¬¸ê°€ ê²°ê³¼ ì¢…í•©

#### 5-4. JSON Output ìŠ¤í‚¤ë§ˆ
- [x] `AGENT_OUTPUT_SCHEMA`: verdict, confidence, reasoning, key_evidence, uncertainties
- [x] `DEBATE_RESPONSE_SCHEMA`: response_type, content, verdict_changed, new_verdict

#### 5-5. MAIFS í†µí•© ì–´ëŒ‘í„°
- [x] `src/llm/qwen_maifs_adapter.py` - ê¸°ì¡´ ì‹œìŠ¤í…œê³¼ ì—°ë™
- [x] `analyze_with_qwen()` - Tool ê²°ê³¼ë¥¼ Qwenìœ¼ë¡œ í•´ì„
- [x] `conduct_debate()` - ë¶ˆì¼ì¹˜ ì‹œ í† ë¡  ìˆ˜í–‰

#### 5-6. í…ŒìŠ¤íŠ¸
- [x] `tests/test_qwen_integration.py` - 32ê°œ í…ŒìŠ¤íŠ¸ ì¶”ê°€
- [x] ì „ì²´ í…ŒìŠ¤íŠ¸ 161ê°œ í†µê³¼

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡° (ì—…ë°ì´íŠ¸)

```
MAIFS/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ maifs.py                    # ë©”ì¸ ì‹œìŠ¤í…œ í´ë˜ìŠ¤
â”‚   â”‚
â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ base_agent.py           # ê¸°ë³¸ ì—ì´ì „íŠ¸
â”‚   â”‚   â”œâ”€â”€ specialist_agents.py    # 4ê°œ ì „ë¬¸ê°€ (LLM í†µí•©)
â”‚   â”‚   â””â”€â”€ manager_agent.py        # ê´€ë¦¬ì ì—ì´ì „íŠ¸
â”‚   â”‚
â”‚   â”œâ”€â”€ tools/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ base_tool.py            # ToolResult, Verdict
â”‚   â”‚   â”œâ”€â”€ frequency_tool.py       # FFT ë¶„ì„
â”‚   â”‚   â”œâ”€â”€ noise_tool.py           # PRNU ë¶„ì„
â”‚   â”‚   â”œâ”€â”€ watermark_tool.py       # OmniGuard
â”‚   â”‚   â””â”€â”€ spatial_tool.py         # ViT ë¶„ì„
â”‚   â”‚
â”‚   â”œâ”€â”€ consensus/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ cobra.py                # COBRA í•©ì˜ ì•Œê³ ë¦¬ì¦˜
â”‚   â”‚
â”‚   â”œâ”€â”€ debate/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ debate_protocol.py      # í† ë¡  í”„ë¡œí† ì½œ
â”‚   â”‚   â”œâ”€â”€ debate_chamber.py       # í† ë¡  ì±”ë²„
â”‚   â”‚   â””â”€â”€ protocols.py            # í† ë¡  ê·œì•½
â”‚   â”‚
â”‚   â”œâ”€â”€ llm/                        # LLM í†µí•© ëª¨ë“ˆ (í™•ì¥ë¨)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ claude_client.py        # Claude API (Manager)
â”‚   â”‚   â”œâ”€â”€ subagent_llm.py         # SubAgent LLM ë² ì´ìŠ¤
â”‚   â”‚   â”œâ”€â”€ qwen_client.py          # âœ… NEW: Qwen vLLM í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â””â”€â”€ qwen_maifs_adapter.py   # âœ… NEW: MAIFS í†µí•© ì–´ëŒ‘í„°
â”‚   â”‚
â”‚   â””â”€â”€ knowledge/
â”‚       â”œâ”€â”€ __init__.py             # KnowledgeBase ë¡œë”
â”‚       â”œâ”€â”€ frequency_domain_knowledge.md
â”‚       â”œâ”€â”€ noise_domain_knowledge.md
â”‚       â”œâ”€â”€ watermark_domain_knowledge.md
â”‚       â””â”€â”€ spatial_domain_knowledge.md
â”‚
â”œâ”€â”€ scripts/                        # ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ start_vllm_server.sh        # âœ… NEW: vLLM ì„œë²„ ì‹œì‘
â”‚   â””â”€â”€ example_qwen_analysis.py    # âœ… NEW: ì‚¬ìš© ì˜ˆì‹œ
â”‚
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test_tools.py               # ë„êµ¬ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_cobra.py               # COBRA í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_debate.py              # í† ë¡  í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_e2e.py                 # E2E í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_checkpoint_loading.py  # ì²´í¬í¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_llm_integration.py     # LLM í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_subagent_llm.py        # SubAgent LLM í…ŒìŠ¤íŠ¸
â”‚   â””â”€â”€ test_qwen_integration.py    # âœ… NEW: Qwen í†µí•© í…ŒìŠ¤íŠ¸
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ ARCHITECTURE.md
â”‚   â””â”€â”€ API_REFERENCE.md
â”‚
â””â”€â”€ ë¬¸ì„œ (Root)
    â”œâ”€â”€ README.md
    â”œâ”€â”€ PROGRESS_REPORT.md          # ì´ ë¬¸ì„œ
    â””â”€â”€ DOCUMENTATION.md
```

---

## ğŸ“Š ì½”ë“œ í†µê³„

| êµ¬ë¶„ | íŒŒì¼ ìˆ˜ | ì½”ë“œ ë¼ì¸ |
|-----|--------|----------|
| Core (src/) | 25 | ~6,500 |
| Scripts | 3 | ~300 |
| Tests | 8 | ~3,000 |
| Documentation | 15 | ~4,000 |
| **Total** | **51** | **~13,800** |

### í…ŒìŠ¤íŠ¸ í˜„í™©
```
collected 161 tests

âœ… ë„êµ¬ í…ŒìŠ¤íŠ¸: 33ê°œ
âœ… COBRA í…ŒìŠ¤íŠ¸: 19ê°œ
âœ… í† ë¡  í…ŒìŠ¤íŠ¸: 22ê°œ
âœ… E2E í…ŒìŠ¤íŠ¸: 23ê°œ
âœ… ì²´í¬í¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸: 15ê°œ
âœ… LLM í†µí•© í…ŒìŠ¤íŠ¸: 17ê°œ
âœ… SubAgent LLM í…ŒìŠ¤íŠ¸: 30ê°œ (ì¶”ê°€)
âœ… Qwen í†µí•© í…ŒìŠ¤íŠ¸: 32ê°œ (NEW)

161 passed, 10 skipped (ì‹¤ì œ ì´ë¯¸ì§€/API í‚¤ í•„ìš” í…ŒìŠ¤íŠ¸)
```

---

## ğŸš€ ì‚¬ìš©ë²•

### 1. vLLM ì„œë²„ ì‹œì‘
```bash
# í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (ì„ íƒ)
export MODEL_NAME="Qwen/Qwen2.5-32B-Instruct"
export TENSOR_PARALLEL_SIZE=4
export PORT=8000

# ì„œë²„ ì‹œì‘
./scripts/start_vllm_server.sh
```

### 2. ì´ë¯¸ì§€ ë¶„ì„ ì‹¤í–‰
```bash
# ì‹¤ì œ ì´ë¯¸ì§€ ë¶„ì„
python scripts/example_qwen_analysis.py --image path/to/image.jpg

# ë°ëª¨ ëª¨ë“œ (ëœë¤ ì´ë¯¸ì§€)
python scripts/example_qwen_analysis.py --demo

# í† ë¡  ë¹„í™œì„±í™”
python scripts/example_qwen_analysis.py --demo --no-debate
```

### 3. Python ì½”ë“œì—ì„œ ì‚¬ìš©
```python
import asyncio
from src.llm import QwenMAIFSAdapter, AgentRole
from src.tools import FrequencyAnalysisTool, NoiseAnalysisTool

# Tool ë¶„ì„ ì‹¤í–‰
freq_tool = FrequencyAnalysisTool()
noise_tool = NoiseAnalysisTool()
# ...

tool_results = {
    "frequency": freq_tool.analyze(image).evidence,
    "noise": noise_tool.analyze(image).evidence,
    "watermark": wm_tool.analyze(image).evidence,
    "spatial": spatial_tool.analyze(image).evidence
}

# Qwen LLMìœ¼ë¡œ í•´ì„ + í† ë¡ 
adapter = QwenMAIFSAdapter(base_url="http://localhost:8000")

async def analyze():
    # ë°°ì¹˜ ì¶”ë¡  (4ê°œ ë™ì‹œ)
    results = await adapter.analyze_with_qwen(tool_results)

    # ë¶ˆì¼ì¹˜ ì‹œ í† ë¡ 
    debate_result = await adapter.conduct_debate(results)

    return results, debate_result

results, debate = asyncio.run(analyze())
```

---

## ğŸ”§ ì£¼ìš” ì»´í¬ë„ŒíŠ¸ ìƒì„¸

### QwenClient
```python
class QwenClient:
    """vLLM ì„œë²„ì™€ í†µì‹ í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸"""

    # í•µì‹¬ ê¸°ëŠ¥
    async def infer(role, tool_results)       # ë‹¨ì¼ ì¶”ë¡ 
    async def batch_infer(tool_results_map)   # ë°°ì¹˜ ì¶”ë¡  (4ê°œ ë™ì‹œ)
    async def debate_respond(...)             # í† ë¡  ì‘ë‹µ ìƒì„±

    # Guided JSON Output
    # - AGENT_OUTPUT_SCHEMA: verdict, confidence, reasoning, ...
    # - DEBATE_RESPONSE_SCHEMA: response_type, verdict_changed, ...
```

### QwenMAIFSAdapter
```python
class QwenMAIFSAdapter:
    """MAIFS ì‹œìŠ¤í…œê³¼ Qwenì„ ì—°ê²°í•˜ëŠ” ì–´ëŒ‘í„°"""

    # ë¶„ì„
    async def analyze_with_qwen(tool_results_map)
    async def analyze_single(agent_name, tool_results)

    # í† ë¡ 
    async def conduct_debate(analysis_results)
```

### JSON Output ìŠ¤í‚¤ë§ˆ
```json
// ì—ì´ì „íŠ¸ ë¶„ì„ ê²°ê³¼
{
    "verdict": "AI_GENERATED | MANIPULATED | AUTHENTIC | UNCERTAIN",
    "confidence": 0.0 ~ 1.0,
    "reasoning": "íŒì • ê·¼ê±°",
    "key_evidence": ["ì¦ê±°1", "ì¦ê±°2"],
    "uncertainties": ["ë¶ˆí™•ì‹¤í•œ ì "]
}

// í† ë¡  ì‘ë‹µ
{
    "response_type": "defense | concession | counter | clarification",
    "content": "ì‘ë‹µ ë‚´ìš©",
    "verdict_changed": true/false,
    "new_verdict": "ë³€ê²½ëœ íŒì • (ìˆì„ ê²½ìš°)",
    "new_confidence": 0.0 ~ 1.0,
    "reasoning": "ë³€ê²½/ìœ ì§€ ì´ìœ "
}
```

---

## â³ í–¥í›„ ê³„íš

### ë‹¨ê¸° ëª©í‘œ (1ì£¼)

| ìš°ì„ ìˆœìœ„ | ì‘ì—… | ìƒíƒœ |
|---------|-----|------|
| 1 | vLLM ì„œë²„ ì‹¤ì œ ë°°í¬ í…ŒìŠ¤íŠ¸ | â³ |
| 2 | ì‹¤ì œ ì´ë¯¸ì§€ ë¶„ì„ í…ŒìŠ¤íŠ¸ | â³ |
| 3 | í† ë¡  ê²°ê³¼ ì‹œê°í™” | â³ |

### ì¤‘ê¸° ëª©í‘œ (2-3ì£¼)

| ìš°ì„ ìˆœìœ„ | ì‘ì—… | ìƒíƒœ |
|---------|-----|------|
| 1 | GenImage ë°ì´í„°ì…‹ í‰ê°€ | â³ |
| 2 | ë²¤ì¹˜ë§ˆí¬ ë¹„êµ | â³ |
| 3 | ì„±ëŠ¥ ìµœì í™” | â³ |

### ì¥ê¸° ëª©í‘œ (1-2ê°œì›”)

| ìš°ì„ ìˆœìœ„ | ì‘ì—… | ìƒíƒœ |
|---------|-----|------|
| 1 | ë…¼ë¬¸ ì´ˆì•ˆ ì‘ì„± | â³ |
| 2 | ì‹¤í—˜ ê²°ê³¼ ì •ë¦¬ | â³ |
| 3 | ì›¹ ì¸í„°í˜ì´ìŠ¤ (Gradio) | â³ |

---

## ğŸ“ˆ ì˜ˆìƒ ì„±ëŠ¥

### ì•„í‚¤í…ì²˜ ë¹„êµ

| êµ¬ì„± | ì„¤ëª… |
|-----|------|
| **Single Model** | í•˜ë‚˜ì˜ ë¶„ë¥˜ê¸° |
| **Ensemble (íˆ¬í‘œ)** | 4ê°œ ë¶„ë¥˜ê¸° ë‹¤ìˆ˜ê²° |
| **MAIFS (ì´ì „)** | 4ê°œ ì—ì´ì „íŠ¸ + COBRA í•©ì˜ |
| **MAIFS v0.6 (í˜„ì¬)** | 4ê°œ ì—ì´ì „íŠ¸ + LLM í•´ì„ + í† ë¡  |

### ê¸°ëŒ€ íš¨ê³¼

| ì§€í‘œ | MAIFS ì´ì „ | MAIFS v0.6 |
|-----|-----------|-----------|
| íŒì • ì •í™•ë„ | ~85% | **88%+** (ì˜ˆìƒ) |
| í•´ì„ ê°€ëŠ¥ì„± | ë‚®ìŒ | **ë†’ìŒ** (JSON êµ¬ì¡°í™”) |
| ì˜ê²¬ ì¶©ëŒ í•´ê²° | ë‹¤ìˆ˜ê²° | **ë…¼ë¦¬ì  í† ë¡ ** |

---

## ğŸ“ ë³€ê²½ ì´ë ¥

| ë‚ ì§œ | ë²„ì „ | ë³€ê²½ ì‚¬í•­ |
|-----|------|---------|
| 2026-01-20 | v0.1.0 | ì´ˆê¸° êµ¬í˜„ |
| 2026-01-21 | v0.2.0 | í…ŒìŠ¤íŠ¸ ì™„ì„± |
| 2026-01-22 | v0.3.0 | OmniGuard í†µí•© |
| 2026-01-22 | v0.4.0 | Manager LLM í†µí•© |
| 2026-01-23 | v0.5.0 | í† ë¡  ì‹œìŠ¤í…œ ì„¤ê³„, ì—°êµ¬ ë³´ê³ ì„œ ë¶„ì„ |
| **2026-01-24** | **v0.6.0** | **Qwen vLLM í†µí•© ì™„ë£Œ** |

---

## ğŸ”— ê´€ë ¨ íŒŒì¼

### ì‹ ê·œ ì¶”ê°€ íŒŒì¼ (v0.6.0)
| íŒŒì¼ | ì„¤ëª… | ë¼ì¸ ìˆ˜ |
|-----|------|--------|
| `src/llm/qwen_client.py` | vLLM í´ë¼ì´ì–¸íŠ¸ | ~450 |
| `src/llm/qwen_maifs_adapter.py` | MAIFS ì–´ëŒ‘í„° | ~350 |
| `scripts/start_vllm_server.sh` | ì„œë²„ ì‹œì‘ ìŠ¤í¬ë¦½íŠ¸ | ~45 |
| `scripts/example_qwen_analysis.py` | ì‚¬ìš© ì˜ˆì‹œ | ~150 |
| `tests/test_qwen_integration.py` | í†µí•© í…ŒìŠ¤íŠ¸ | ~360 |

---

**ë‹¤ìŒ ë§ˆì¼ìŠ¤í†¤**: vLLM ì„œë²„ ì‹¤ì œ ë°°í¬ ë° ë°ì´í„°ì…‹ í‰ê°€

---

*ì´ ë³´ê³ ì„œëŠ” 2026-01-24 ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.*
